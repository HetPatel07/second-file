webpackJsonp([4],{413:function(n,t,e){"use strict";e.d(t,"b",function(){return s}),e.d(t,"a",function(){return f});var o=e(103),i=e.n(o),r=(e(308),e(415)),u=(e.n(r),void 0),c=function(){return u?Promise.resolve():(i.a.apps.length<1&&i.a.initializeApp({apiKey:window.__firestoreUserConfig.apiKey,authDomain:window.__firestoreUserConfig.authDomain,databaseURL:window.__firestoreUserConfig.databaseURL,projectId:window.__firestoreUserConfig.projectId}),i.a.auth().signInWithCustomToken(window.__firestoreUserConfig.token).then(function(){var n=i.a.firestore(),t={timestampsInSnapshots:!0};n.settings(t),u=i.a.firestore()}))},a=function(n){return c().then(function(){return u.doc("users/"+n.id)})},s=function(n){return a(n).then(function(n){return n.collection("pins")})},f=function(n){return a(n).then(function(n){return n.collection("featureNotifications")})}},417:function(n,t,e){"use strict";e.d(t,"a",function(){return o});var o=function(n){(document.attachEvent?"complete"===document.readyState:"loading"!==document.readyState)?n():document.addEventListener("DOMContentLoaded",n)}},683:function(n,t,e){e(684),e(688)},684:function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=e(685),i=e(413),r=e(687),u=e(417),c=document.querySelector("#pinned-items"),a=document.querySelector("#pin-button"),s={},f=void 0,d=function(){return f?Promise.resolve(f):Object(i.b)(window.__user).then(function(n){return f=n})},l=function(n){s={},n.forEach(function(n){var t=n.data();s[t.slug]=t})},p=function(){d().then(function(n){n.onSnapshot(function(n){l(n),j(s)})})},w=function(){var n=v();return n?n.slug_hash||n.permalink:null},v=function(){return window.__item?window.__item:window.__post?window.__post:window.__collection?window.__collection:null},_=function(n){return Object.values(n).map(function(n){return n.slug})},h=function(n){if(a){var t=w(),e=_(n);t&&e.includes(t)?a.classList.add("is-pinned"):a.classList.remove("is-pinned")}},m=function(n){var t=Object.values(n);if(0===t.length)return void y();c.innerHTML=g(t)},g=function(n){return"<ul>"+Object(o.a)(n,"createdAt").map(function(n){return b(n)}).join("")+"</ul>"},b=function(n){return'\n    <li class="pin-item-type-'+n.type+'" data-slug="'+n.slug+'">\n      <svg class="icon icon-new-'+n.type+'">\n        <use xlink:href="#icon-new-'+n.type+'"></use>\n      </svg>\n      <a href="/user/'+n.type+"/"+n.slug+'">\n        '+n.title+'\n      </a>\n      <button class="remove-pinned-item invisible-button" data-remove-slug="'+n.slug+'">\n        âœ•\n      </button>\n    </li>\n  '},y=function(){c.innerHTML='<p>You don\'t have any <a href="https://blog.codepen.io/documentation/features/pinned-items/" target="_blank" rel="noopener">pinned items</a> yet. You can pin any Pen, Post, or Collection (from their respective pages) for easy access here.</p>'},j=function(n){h(n),m(n)},O=function(n){n.preventDefault();var t=w();s[t]?U(t):L(t)},E=function(){return window.__itemType?window.__itemType:window.__post?"post":window.__collection?"collection":"pen"},k=function(){var n=v();return n.title||n.name||n.slug_hash},P=function(){return{createdAt:Object(r.a)(),slug:w(),title:k(),type:E()}},L=function(n){d().then(function(t){t.doc(n).set(P())})},S=function(n){var t=n.target.getAttribute("data-remove-slug");t&&(n.stopPropagation(),U(t))},U=function(n){d().then(function(t){t.doc(n).delete()})};Object(u.a)(function(){c&&window.__user.id>1&&(p(),a&&a.addEventListener("click",O),c.addEventListener("click",S))})},685:function(n,t,e){"use strict";e.d(t,"a",function(){return o});var o=function(n,t){return n.sort(function(n,e){return n[t]<e[t]?1:n[t]>e[t]?-1:0})}},687:function(n,t,e){"use strict";e.d(t,"a",function(){return o});var o=function(){return Math.floor((new Date).getTime()/1e3)}},688:function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=e(413),i=e(417),r=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},u=void 0,c={PINS_FEATURE:{seen:!1}},a=function(){s().then(function(n){n.onSnapshot(function(n){n.forEach(function(n){var t=n.id,e={};e[t]=n.data(),c=r({},c,e)}),f(c)})})},s=function(){return u?Promise.resolve(u):Object(o.a)(window.__user).then(function(n){return u=n})},f=function(n){Object.keys(n).forEach(function(t){switch(t){case"PINS_FEATURE":!1===n[t].seen&&p();break;default:console.error("unknown feature")}})},d=document.querySelector("#pin-dropdown-button"),l=function(n){n.preventDefault(),w()},p=function(){$("#pin-dropdown-button").append('<div class="feature-callout">New feature!</div>')},w=function(){$("#pin-dropdown-button").find(".feature-callout").remove(),s().then(function(n){n.doc("PINS_FEATURE").set({seen:!0})})};Object(i.a)(function(){d&&window.__user.id>1&&(a(),d&&d.addEventListener("click",l))})}},[683]);
//# sourceMappingURL=everypage-11bf0449132ea51bdb44.js.map